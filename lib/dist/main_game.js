(()=>{var e={485:(e,t,n)=>{e.exports=n(894)},894:function(e,t,n){e=n.nmd(e),function(){var t,n,a,s,i,o,r,l,d,p,u,c,y,h,m;a=Math.floor,p=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},d=function(e,t,s,i,o){var r;if(null==s&&(s=0),null==o&&(o=n),s<0)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);s<i;)o(t,e[r=a((s+i)/2)])<0?i=r:s=r+1;return[].splice.apply(e,[s,s-s].concat(t)),t},o=function(e,t,a){return null==a&&(a=n),e.push(t),h(e,0,e.length-1,a)},i=function(e,t){var a,s;return null==t&&(t=n),a=e.pop(),e.length?(s=e[0],e[0]=a,m(e,0,t)):s=a,s},l=function(e,t,a){var s;return null==a&&(a=n),s=e[0],e[0]=t,m(e,0,a),s},r=function(e,t,a){var s;return null==a&&(a=n),e.length&&a(e[0],t)<0&&(t=(s=[e[0],t])[0],e[0]=s[1],m(e,0,a)),t},s=function(e,t){var s,i,o,r,l,d;for(null==t&&(t=n),l=[],i=0,o=(r=function(){d=[];for(var t=0,n=a(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)d.push(t);return d}.apply(this).reverse()).length;i<o;i++)s=r[i],l.push(m(e,s,t));return l},y=function(e,t,a){var s;if(null==a&&(a=n),-1!==(s=e.indexOf(t)))return h(e,0,s,a),m(e,s,a)},u=function(e,t,a){var i,o,l,d,p;if(null==a&&(a=n),!(o=e.slice(0,t)).length)return o;for(s(o,a),l=0,d=(p=e.slice(t)).length;l<d;l++)i=p[l],r(o,i,a);return o.sort(a).reverse()},c=function(e,t,a){var o,r,l,u,c,y,h,m,f;if(null==a&&(a=n),10*t<=e.length){if(!(l=e.slice(0,t).sort(a)).length)return l;for(r=l[l.length-1],u=0,y=(h=e.slice(t)).length;u<y;u++)a(o=h[u],r)<0&&(d(l,o,0,null,a),l.pop(),r=l[l.length-1]);return l}for(s(e,a),f=[],c=0,m=p(t,e.length);0<=m?c<m:c>m;0<=m?++c:--c)f.push(i(e,a));return f},h=function(e,t,a,s){var i,o,r;for(null==s&&(s=n),i=e[a];a>t&&s(i,o=e[r=a-1>>1])<0;)e[a]=o,a=r;return e[a]=i},m=function(e,t,a){var s,i,o,r,l;for(null==a&&(a=n),i=e.length,l=t,o=e[t],s=2*t+1;s<i;)(r=s+1)<i&&!(a(e[s],e[r])<0)&&(s=r),e[t]=e[s],s=2*(t=s)+1;return e[t]=o,h(e,l,t,a)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=o,e.pop=i,e.replace=l,e.pushpop=r,e.heapify=s,e.updateItem=y,e.nlargest=u,e.nsmallest=c,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return r(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return s(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return y(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}.call(this)},657:(e,t,n)=>{e.exports=n(558)},558:(e,t,n)=>{e.exports={Heap:n(485),Node:n(289),Grid:n(809),Util:n(408),DiagonalMovement:n(506),Heuristic:n(430),AStarFinder:n(131),BestFirstFinder:n(644),BreadthFirstFinder:n(904),DijkstraFinder:n(607),BiAStarFinder:n(713),BiBestFirstFinder:n(325),BiBreadthFirstFinder:n(513),BiDijkstraFinder:n(511),IDAStarFinder:n(944),JumpPointFinder:n(200)}},506:e=>{e.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},809:(e,t,n)=>{var a=n(289),s=n(506);function i(e,t,n){var a;"object"!=typeof e?a=e:(t=e.length,a=e[0].length,n=e),this.width=a,this.height=t,this.nodes=this._buildNodes(a,t,n)}i.prototype._buildNodes=function(e,t,n){var s,i,o=new Array(t);for(s=0;s<t;++s)for(o[s]=new Array(e),i=0;i<e;++i)o[s][i]=new a(i,s);if(void 0===n)return o;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(s=0;s<t;++s)for(i=0;i<e;++i)n[s][i]&&(o[s][i].walkable=!1);return o},i.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},i.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},i.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},i.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},i.prototype.getNeighbors=function(e,t){var n=e.x,a=e.y,i=[],o=!1,r=!1,l=!1,d=!1,p=!1,u=!1,c=!1,y=!1,h=this.nodes;if(this.isWalkableAt(n,a-1)&&(i.push(h[a-1][n]),o=!0),this.isWalkableAt(n+1,a)&&(i.push(h[a][n+1]),l=!0),this.isWalkableAt(n,a+1)&&(i.push(h[a+1][n]),p=!0),this.isWalkableAt(n-1,a)&&(i.push(h[a][n-1]),c=!0),t===s.Never)return i;if(t===s.OnlyWhenNoObstacles)r=c&&o,d=o&&l,u=l&&p,y=p&&c;else if(t===s.IfAtMostOneObstacle)r=c||o,d=o||l,u=l||p,y=p||c;else{if(t!==s.Always)throw new Error("Incorrect value of diagonalMovement");r=!0,d=!0,u=!0,y=!0}return r&&this.isWalkableAt(n-1,a-1)&&i.push(h[a-1][n-1]),d&&this.isWalkableAt(n+1,a-1)&&i.push(h[a-1][n+1]),u&&this.isWalkableAt(n+1,a+1)&&i.push(h[a+1][n+1]),y&&this.isWalkableAt(n-1,a+1)&&i.push(h[a+1][n-1]),i},i.prototype.clone=function(){var e,t,n=this.width,s=this.height,o=this.nodes,r=new i(n,s),l=new Array(s);for(e=0;e<s;++e)for(l[e]=new Array(n),t=0;t<n;++t)l[e][t]=new a(t,e,o[e][t].walkable);return r.nodes=l,r},e.exports=i},430:e=>{e.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},289:e=>{e.exports=function(e,t,n){this.x=e,this.y=t,this.walkable=void 0===n||n}},408:(e,t)=>{function n(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function a(e,t,n,a){var s,i,o,r,l,d,p=Math.abs,u=[];for(s=e<n?1:-1,i=t<a?1:-1,l=(o=p(n-e))-(r=p(a-t));u.push([e,t]),e!==n||t!==a;)(d=2*l)>-r&&(l-=r,e+=s),d<o&&(l+=o,t+=i);return u}t.backtrace=n,t.biBacktrace=function(e,t){var a=n(e),s=n(t);return a.concat(s.reverse())},t.pathLength=function(e){var t,n,a,s,i,o=0;for(t=1;t<e.length;++t)n=e[t-1],a=e[t],s=n[0]-a[0],i=n[1]-a[1],o+=Math.sqrt(s*s+i*i);return o},t.interpolate=a,t.expandPath=function(e){var t,n,s,i,o,r,l=[],d=e.length;if(d<2)return l;for(o=0;o<d-1;++o)for(t=e[o],n=e[o+1],i=(s=a(t[0],t[1],n[0],n[1])).length,r=0;r<i-1;++r)l.push(s[r]);return l.push(e[d-1]),l},t.smoothenPath=function(e,t){var n,s,i,o,r,l,d,p,u,c=t.length,y=t[0][0],h=t[0][1],m=t[c-1][0],f=t[c-1][1];for(i=[[n=y,s=h]],o=2;o<c;++o){for(d=a(n,s,(l=t[o])[0],l[1]),u=!1,r=1;r<d.length;++r)if(p=d[r],!e.isWalkableAt(p[0],p[1])){u=!0;break}u&&(lastValidCoord=t[o-1],i.push(lastValidCoord),n=lastValidCoord[0],s=lastValidCoord[1])}return i.push([m,f]),i},t.compressPath=function(e){if(e.length<3)return e;var t,n,a,s,i,o,r=[],l=e[0][0],d=e[0][1],p=e[1][0],u=e[1][1],c=p-l,y=u-d;for(c/=i=Math.sqrt(c*c+y*y),y/=i,r.push([l,d]),o=2;o<e.length;o++)t=p,n=u,a=c,s=y,c=(p=e[o][0])-t,y=(u=e[o][1])-n,y/=i=Math.sqrt(c*c+y*y),(c/=i)===a&&y===s||r.push([t,n]);return r.push([p,u]),r}},131:(e,t,n)=>{var a=n(485),s=n(408),i=n(430),o=n(506);function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||i.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||i.manhattan:this.heuristic=e.heuristic||i.octile}r.prototype.findPath=function(e,t,n,i,o){var r,l,d,p,u,c,y,h,m=new a((function(e,t){return e.f-t.f})),f=o.getNodeAt(e,t),b=o.getNodeAt(n,i),g=this.heuristic,A=this.diagonalMovement,k=this.weight,v=Math.abs,x=Math.SQRT2;for(f.g=0,f.f=0,m.push(f),f.opened=!0;!m.empty();){if((r=m.pop()).closed=!0,r===b)return s.backtrace(b);for(p=0,u=(l=o.getNeighbors(r,A)).length;p<u;++p)(d=l[p]).closed||(c=d.x,y=d.y,h=r.g+(c-r.x==0||y-r.y==0?1:x),(!d.opened||h<d.g)&&(d.g=h,d.h=d.h||k*g(v(c-n),v(y-i)),d.f=d.g+d.h,d.parent=r,d.opened?m.updateItem(d):(m.push(d),d.opened=!0)))}return[]},e.exports=r},644:(e,t,n)=>{var a=n(131);function s(e){a.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}s.prototype=new a,s.prototype.constructor=s,e.exports=s},713:(e,t,n)=>{var a=n(485),s=n(408),i=n(430),o=n(506);function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||i.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=e.heuristic||i.manhattan:this.heuristic=e.heuristic||i.octile}r.prototype.findPath=function(e,t,n,i,o){var r,l,d,p,u,c,y,h,m=function(e,t){return e.f-t.f},f=new a(m),b=new a(m),g=o.getNodeAt(e,t),A=o.getNodeAt(n,i),k=this.heuristic,v=this.diagonalMovement,x=this.weight,w=Math.abs,C=Math.SQRT2;for(g.g=0,g.f=0,f.push(g),g.opened=1,A.g=0,A.f=0,b.push(A),A.opened=2;!f.empty()&&!b.empty();){for((r=f.pop()).closed=!0,p=0,u=(l=o.getNeighbors(r,v)).length;p<u;++p)if(!(d=l[p]).closed){if(2===d.opened)return s.biBacktrace(r,d);c=d.x,y=d.y,h=r.g+(c-r.x==0||y-r.y==0?1:C),(!d.opened||h<d.g)&&(d.g=h,d.h=d.h||x*k(w(c-n),w(y-i)),d.f=d.g+d.h,d.parent=r,d.opened?f.updateItem(d):(f.push(d),d.opened=1))}for((r=b.pop()).closed=!0,p=0,u=(l=o.getNeighbors(r,v)).length;p<u;++p)if(!(d=l[p]).closed){if(1===d.opened)return s.biBacktrace(d,r);c=d.x,y=d.y,h=r.g+(c-r.x==0||y-r.y==0?1:C),(!d.opened||h<d.g)&&(d.g=h,d.h=d.h||x*k(w(c-e),w(y-t)),d.f=d.g+d.h,d.parent=r,d.opened?b.updateItem(d):(b.push(d),d.opened=2))}}return[]},e.exports=r},325:(e,t,n)=>{var a=n(713);function s(e){a.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}s.prototype=new a,s.prototype.constructor=s,e.exports=s},513:(e,t,n)=>{var a=n(408),s=n(506);function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}i.prototype.findPath=function(e,t,n,s,i){var o,r,l,d,p,u=i.getNodeAt(e,t),c=i.getNodeAt(n,s),y=[],h=[],m=this.diagonalMovement;for(y.push(u),u.opened=!0,u.by=0,h.push(c),c.opened=!0,c.by=1;y.length&&h.length;){for((l=y.shift()).closed=!0,d=0,p=(o=i.getNeighbors(l,m)).length;d<p;++d)if(!(r=o[d]).closed)if(r.opened){if(1===r.by)return a.biBacktrace(l,r)}else y.push(r),r.parent=l,r.opened=!0,r.by=0;for((l=h.shift()).closed=!0,d=0,p=(o=i.getNeighbors(l,m)).length;d<p;++d)if(!(r=o[d]).closed)if(r.opened){if(0===r.by)return a.biBacktrace(r,l)}else h.push(r),r.parent=l,r.opened=!0,r.by=1}return[]},e.exports=i},511:(e,t,n)=>{var a=n(713);function s(e){a.call(this,e),this.heuristic=function(e,t){return 0}}s.prototype=new a,s.prototype.constructor=s,e.exports=s},904:(e,t,n)=>{var a=n(408),s=n(506);function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never)}i.prototype.findPath=function(e,t,n,s,i){var o,r,l,d,p,u=[],c=this.diagonalMovement,y=i.getNodeAt(e,t),h=i.getNodeAt(n,s);for(u.push(y),y.opened=!0;u.length;){if((l=u.shift()).closed=!0,l===h)return a.backtrace(h);for(d=0,p=(o=i.getNeighbors(l,c)).length;d<p;++d)(r=o[d]).closed||r.opened||(u.push(r),r.opened=!0,r.parent=l)}return[]},e.exports=i},607:(e,t,n)=>{var a=n(131);function s(e){a.call(this,e),this.heuristic=function(e,t){return 0}}s.prototype=new a,s.prototype.constructor=s,e.exports=s},944:(e,t,n)=>{n(408);var a=n(430),s=n(289),i=n(506);function o(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never),this.diagonalMovement===i.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}o.prototype.findPath=function(e,t,n,a,i){var o,r,l,d=(new Date).getTime(),p=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),u=function(e,t,n,a,o){if(this.timeLimit>0&&(new Date).getTime()-d>1e3*this.timeLimit)return 1/0;var r,l,c,h,m=t+p(e,y)*this.weight;if(m>n)return m;if(e==y)return a[o]=[e.x,e.y],e;var f,b,g=i.getNeighbors(e,this.diagonalMovement);for(c=0,r=1/0;h=g[c];++c){if(this.trackRecursion&&(h.retainCount=h.retainCount+1||1,!0!==h.tested&&(h.tested=!0)),(l=u(h,t+(b=h,(f=e).x===b.x||f.y===b.y?1:Math.SQRT2),n,a,o+1))instanceof s)return a[o]=[e.x,e.y],l;this.trackRecursion&&0==--h.retainCount&&(h.tested=!1),l<r&&(r=l)}return r}.bind(this),c=i.getNodeAt(e,t),y=i.getNodeAt(n,a),h=p(c,y);for(o=0;;++o){if((l=u(c,0,h,r=[],0))===1/0)return[];if(l instanceof s)return r;h=l}return[]},e.exports=o},524:(e,t,n)=>{var a=n(10),s=n(506);function i(e){a.call(this,e)}i.prototype=new a,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,a){var s=this.grid,i=e-n,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==i&&0!==o){if(s.isWalkableAt(e-i,t+o)&&!s.isWalkableAt(e-i,t)||s.isWalkableAt(e+i,t-o)&&!s.isWalkableAt(e,t-o))return[e,t];if(this._jump(e+i,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==i){if(s.isWalkableAt(e+i,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+i,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+o)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+o)&&!s.isWalkableAt(e-1,t))return[e,t];return this._jump(e+i,t+o,e,t)},i.prototype._findNeighbors=function(e){var t,n,a,i,o,r,l,d,p=e.parent,u=e.x,c=e.y,y=this.grid,h=[];if(p)t=p.x,n=p.y,a=(u-t)/Math.max(Math.abs(u-t),1),i=(c-n)/Math.max(Math.abs(c-n),1),0!==a&&0!==i?(y.isWalkableAt(u,c+i)&&h.push([u,c+i]),y.isWalkableAt(u+a,c)&&h.push([u+a,c]),y.isWalkableAt(u+a,c+i)&&h.push([u+a,c+i]),y.isWalkableAt(u-a,c)||h.push([u-a,c+i]),y.isWalkableAt(u,c-i)||h.push([u+a,c-i])):0===a?(y.isWalkableAt(u,c+i)&&h.push([u,c+i]),y.isWalkableAt(u+1,c)||h.push([u+1,c+i]),y.isWalkableAt(u-1,c)||h.push([u-1,c+i])):(y.isWalkableAt(u+a,c)&&h.push([u+a,c]),y.isWalkableAt(u,c+1)||h.push([u+a,c+1]),y.isWalkableAt(u,c-1)||h.push([u+a,c-1]));else for(l=0,d=(o=y.getNeighbors(e,s.Always)).length;l<d;++l)r=o[l],h.push([r.x,r.y]);return h},e.exports=i},405:(e,t,n)=>{var a=n(10),s=n(506);function i(e){a.call(this,e)}i.prototype=new a,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,a){var s=this.grid,i=e-n,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==i&&0!==o){if(s.isWalkableAt(e-i,t+o)&&!s.isWalkableAt(e-i,t)||s.isWalkableAt(e+i,t-o)&&!s.isWalkableAt(e,t-o))return[e,t];if(this._jump(e+i,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==i){if(s.isWalkableAt(e+i,t+1)&&!s.isWalkableAt(e,t+1)||s.isWalkableAt(e+i,t-1)&&!s.isWalkableAt(e,t-1))return[e,t]}else if(s.isWalkableAt(e+1,t+o)&&!s.isWalkableAt(e+1,t)||s.isWalkableAt(e-1,t+o)&&!s.isWalkableAt(e-1,t))return[e,t];return s.isWalkableAt(e+i,t)||s.isWalkableAt(e,t+o)?this._jump(e+i,t+o,e,t):null},i.prototype._findNeighbors=function(e){var t,n,a,i,o,r,l,d,p=e.parent,u=e.x,c=e.y,y=this.grid,h=[];if(p)t=p.x,n=p.y,a=(u-t)/Math.max(Math.abs(u-t),1),i=(c-n)/Math.max(Math.abs(c-n),1),0!==a&&0!==i?(y.isWalkableAt(u,c+i)&&h.push([u,c+i]),y.isWalkableAt(u+a,c)&&h.push([u+a,c]),(y.isWalkableAt(u,c+i)||y.isWalkableAt(u+a,c))&&h.push([u+a,c+i]),!y.isWalkableAt(u-a,c)&&y.isWalkableAt(u,c+i)&&h.push([u-a,c+i]),!y.isWalkableAt(u,c-i)&&y.isWalkableAt(u+a,c)&&h.push([u+a,c-i])):0===a?y.isWalkableAt(u,c+i)&&(h.push([u,c+i]),y.isWalkableAt(u+1,c)||h.push([u+1,c+i]),y.isWalkableAt(u-1,c)||h.push([u-1,c+i])):y.isWalkableAt(u+a,c)&&(h.push([u+a,c]),y.isWalkableAt(u,c+1)||h.push([u+a,c+1]),y.isWalkableAt(u,c-1)||h.push([u+a,c-1]));else for(l=0,d=(o=y.getNeighbors(e,s.IfAtMostOneObstacle)).length;l<d;++l)r=o[l],h.push([r.x,r.y]);return h},e.exports=i},368:(e,t,n)=>{var a=n(10),s=n(506);function i(e){a.call(this,e)}i.prototype=new a,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,a){var s=this.grid,i=e-n,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==i&&0!==o){if(this._jump(e+i,t,e,t)||this._jump(e,t+o,e,t))return[e,t]}else if(0!==i){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-i,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-i,t+1))return[e,t]}else if(0!==o&&(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-o)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-o)))return[e,t];return s.isWalkableAt(e+i,t)&&s.isWalkableAt(e,t+o)?this._jump(e+i,t+o,e,t):null},i.prototype._findNeighbors=function(e){var t,n,a,i,o,r,l,d,p,u=e.parent,c=e.x,y=e.y,h=this.grid,m=[];if(u){if(t=u.x,n=u.y,a=(c-t)/Math.max(Math.abs(c-t),1),i=(y-n)/Math.max(Math.abs(y-n),1),0!==a&&0!==i)h.isWalkableAt(c,y+i)&&m.push([c,y+i]),h.isWalkableAt(c+a,y)&&m.push([c+a,y]),h.isWalkableAt(c,y+i)&&h.isWalkableAt(c+a,y)&&m.push([c+a,y+i]);else if(0!==a){p=h.isWalkableAt(c+a,y);var f=h.isWalkableAt(c,y+1),b=h.isWalkableAt(c,y-1);p&&(m.push([c+a,y]),f&&m.push([c+a,y+1]),b&&m.push([c+a,y-1])),f&&m.push([c,y+1]),b&&m.push([c,y-1])}else if(0!==i){p=h.isWalkableAt(c,y+i);var g=h.isWalkableAt(c+1,y),A=h.isWalkableAt(c-1,y);p&&(m.push([c,y+i]),g&&m.push([c+1,y+i]),A&&m.push([c-1,y+i])),g&&m.push([c+1,y]),A&&m.push([c-1,y])}}else for(l=0,d=(o=h.getNeighbors(e,s.OnlyWhenNoObstacles)).length;l<d;++l)r=o[l],m.push([r.x,r.y]);return m},e.exports=i},403:(e,t,n)=>{var a=n(10),s=n(506);function i(e){a.call(this,e)}i.prototype=new a,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,a){var s=this.grid,i=e-n,o=t-a;if(!s.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(e,t).tested=!0),s.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==i){if(s.isWalkableAt(e,t-1)&&!s.isWalkableAt(e-i,t-1)||s.isWalkableAt(e,t+1)&&!s.isWalkableAt(e-i,t+1))return[e,t]}else{if(0===o)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(e-1,t)&&!s.isWalkableAt(e-1,t-o)||s.isWalkableAt(e+1,t)&&!s.isWalkableAt(e+1,t-o))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+i,t+o,e,t)},i.prototype._findNeighbors=function(e){var t,n,a,i,o,r,l,d,p=e.parent,u=e.x,c=e.y,y=this.grid,h=[];if(p)t=p.x,n=p.y,a=(u-t)/Math.max(Math.abs(u-t),1),i=(c-n)/Math.max(Math.abs(c-n),1),0!==a?(y.isWalkableAt(u,c-1)&&h.push([u,c-1]),y.isWalkableAt(u,c+1)&&h.push([u,c+1]),y.isWalkableAt(u+a,c)&&h.push([u+a,c])):0!==i&&(y.isWalkableAt(u-1,c)&&h.push([u-1,c]),y.isWalkableAt(u+1,c)&&h.push([u+1,c]),y.isWalkableAt(u,c+i)&&h.push([u,c+i]));else for(l=0,d=(o=y.getNeighbors(e,s.Never)).length;l<d;++l)r=o[l],h.push([r.x,r.y]);return h},e.exports=i},200:(e,t,n)=>{var a=n(506),s=n(403),i=n(524),o=n(368),r=n(405);e.exports=function(e){return(e=e||{}).diagonalMovement===a.Never?new s(e):e.diagonalMovement===a.Always?new i(e):e.diagonalMovement===a.OnlyWhenNoObstacles?new o(e):new r(e)}},10:(e,t,n)=>{var a=n(485),s=n(408),i=n(430);function o(e){e=e||{},this.heuristic=e.heuristic||i.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}n(506),o.prototype.findPath=function(e,t,n,i,o){var r,l=this.openList=new a((function(e,t){return e.f-t.f})),d=this.startNode=o.getNodeAt(e,t),p=this.endNode=o.getNodeAt(n,i);for(this.grid=o,d.g=0,d.f=0,l.push(d),d.opened=!0;!l.empty();){if((r=l.pop()).closed=!0,r===p)return s.expandPath(s.backtrace(p));this._identifySuccessors(r)}return[]},o.prototype._identifySuccessors=function(e){var t,n,a,s,o,r,l,d,p,u,c=this.grid,y=this.heuristic,h=this.openList,m=this.endNode.x,f=this.endNode.y,b=e.x,g=e.y,A=Math.abs;for(Math.max,s=0,o=(t=this._findNeighbors(e)).length;s<o;++s)if(n=t[s],a=this._jump(n[0],n[1],b,g)){if(r=a[0],l=a[1],(u=c.getNodeAt(r,l)).closed)continue;d=i.octile(A(r-b),A(l-g)),p=e.g+d,(!u.opened||p<u.g)&&(u.g=p,u.h=u.h||y(A(r-m),A(l-f)),u.f=u.g+u.h,u.parent=e,u.opened?h.updateItem(u):(h.push(u),u.opened=!0))}},e.exports=o}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=n(657),t=n.n(e);const a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"}],name:"CreateFight",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"}],name:"FinishFight",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!0,internalType:"address",name:"player",type:"address"},{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"}],name:"JoinFight",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"ID",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_fee",type:"uint256"}],name:"changeFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeCollector",type:"address"}],name:"changeFeeCollector",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxPlayers",type:"uint256"}],name:"changeMaxPlayers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxRounds",type:"uint256"}],name:"changeMaxRounds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"uint256",name:"_minAmountPerRound",type:"uint256"}],name:"changeMinAmountPerRound",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"}],name:"changeSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountPerRound",type:"uint256"},{internalType:"uint256",name:"rounds",type:"uint256"},{internalType:"uint256",name:"playersAmount",type:"uint256"},{internalType:"contract IERC20",name:"token",type:"address"}],name:"create",outputs:[{internalType:"uint256",name:"ID",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"fights",outputs:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"baseAmount",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"uint256",name:"finishTime",type:"uint256"},{internalType:"uint256",name:"amountPerRound",type:"uint256"},{internalType:"uint256",name:"rounds",type:"uint256"},{internalType:"uint256",name:"playersAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"finish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getChunkFights",outputs:[{components:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"baseAmount",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"uint256",name:"finishTime",type:"uint256"},{internalType:"uint256",name:"amountPerRound",type:"uint256"},{internalType:"uint256",name:"rounds",type:"uint256"},{internalType:"uint256",name:"playersAmount",type:"uint256"}],internalType:"struct IFairFight.Fight[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"ID",type:"uint256"}],name:"getFightPlayers",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getPlayerFullFights",outputs:[{components:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"baseAmount",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"uint256",name:"finishTime",type:"uint256"},{internalType:"uint256",name:"amountPerRound",type:"uint256"},{internalType:"uint256",name:"rounds",type:"uint256"},{internalType:"uint256",name:"playersAmount",type:"uint256"}],internalType:"struct IFairFight.Fight[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"uint256",name:"_maxRounds",type:"uint256"},{internalType:"address",name:"_feeCollector",type:"address"},{internalType:"uint256",name:"_fee",type:"uint256"},{internalType:"uint256",name:"_minAmountPerRound",type:"uint256"},{internalType:"uint256",name:"_maxPlayers",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"ID",type:"uint256"}],name:"join",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastPlayerFight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPlayers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxRounds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"",type:"address"}],name:"minAmountPerRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"playerClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"ID",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],s=[{name:"Hardhat",chainid:31337,rpc:"http://localhost:8545",currency:"ETH",explorer:"https://etherscan.io",contractAddress:"0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9",charactersAddress:"0xa513E6E4b8f2a923D98304ec87F64353C4D5C853",armorsAddress:"0x2279B7A0a67DB372996a5FaB50D91eAA73d2eBe6",bootsAddress:"0x8A791620dd6260079BF849Dc5567aDC3F2FdC318",weaponsAddress:"0x610178dA211FEF7D417bC0e6FeD39F05609AD788",shopAddress:"0xB7f8BC63BbcaD18155201308C8f3540b07f84F5e"},{name:"Ganache",chainid:1337,rpc:"http://localhost:7545",currency:"ETH",explorer:"",contractAddress:"0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0"},{name:"Goerli",chainid:5,rpc:"https://goerli.infura.io/v3",currency:"ETH",explorer:"",contractAddress:""},{name:"Emerald Testnet",chainid:42261,rpc:"https://testnet.emerald.oasis.dev",currency:"ROSE",explorer:"",contractAddress:"0x231d86b4A0280DcAA9De6282F784B374525e03c3"},{name:"SKALE Network Testnet",chainid:344435,rpc:"https://dev-testnet-v1-0.skalelabs.com",currency:"sFUEL",explorer:"",contractAddress:""},{name:"ScaleT",chainid:1351057110,rpc:"https://staging-v3.skalenodes.com/v1/staging-fast-active-bellatrix",currency:"sFUEL",explorer:"https://staging-fast-active-bellatrix.explorer.staging-v3.skalenodes.com",contractAddress:"0xB0993755B388c1223Da692A3F9622D7B7111E55e"},{name:"Sapphire",chainid:23294,rpc:"https://sapphire.oasis.io",currency:"ROSE",explorer:"https://explorer.sapphire.oasis.io",contractAddress:"0x927C8aF4282E507352088c52014bC8423367c610",charactersAddress:"0x38278c038042c32441475E47750c90c2412c3D79",armorsAddress:"0xe7cCffC4F633713C3ee7d8FEe46d1253a1261206",weaponsAddress:"0x08ee54157DdAF89eEF5fB71a24E7c72C57a6640A",bootsAddress:"0x9004eD0d122E3E7499Cd9c9515a17b06716bF8ca",shopAddress:"0xBaCb197E601aCdeb56E401Bc27A23F4626315a82"},{name:"Sapphire Test",chainid:23295,rpc:"https://testnet.sapphire.oasis.dev",currency:"ROSE",explorer:"",contractAddress:"0x64BB70e1e2f776D95dE00676D8332e6aD5217195"},{name:"SKALE",chainid:503129905,rpc:"https://staging-v3.skalenodes.com/v1/staging-faint-slimy-achird",contractAddress:"0x176DC2E5cB86Ba5d7ee5819478bE1f4FA0931c54",charactersAddress:"0x5DA345aFD7ED3152e4a27B68F6268Ff5A653238B",armorsAddress:"0x1D032461A45De5F62A93619B04306156300f1625",weaponsAddress:"0xA16701F0fFb3D181f5339549C6F098fD0436dbE9",bootsAddress:"0x9E673C126009a6bd75808812985dB957a291A024",shopAddress:"0x82CCD7e02d34EbEbad9168876c8eC541EC1Df64b",currency:"sFUEL",explorer:"https://staging-faint-slimy-achird.explorer.staging-v3.skalenodes.com"},{name:"BNB",chainid:56,rpc:"https://bsc-dataseed.binance.org",currency:"BNB",explorer:"https://bscscan.com",contractAddress:"0x905E08cE63fb7D13cD44520015c557964E0200FF"},{name:"Emerald",chainid:42262,rpc:"https://emerald.oasis.dev",currency:"ROSE",explorer:"https://explorer.emerald.oasis.dev",contractAddress:"0x739B9dedAc3aA99Dbe9102F97fE6cbAeBc66980C",charactersAddress:"0xA18CEbC58aaA1B647cD20901892dfD7999ef9499",armorsAddress:"0xc73f96FCec6883dFfaBe3f89b09dd8Fa0Fc3c17e",weaponsAddress:"0x58C36887ce7293cC9CFbd809A23748A80Aabd840",bootsAddress:"0x8513FA22e1b8e324Cd3aA4CdEC9168ff50d1991d",shopAddress:"0xFEd863cAb6B070a64D3613bD055Be0E647E4D98d"}],i=e=>e.slice(0,6)+"..."+e.slice(e.length-4,e.length);function o(e,t){return e/10**parseInt(t)}function r(e){if(!Number.isInteger(e)){let t=e.toFixed(10);return parseFloat(t)}return e}const l=[{chaindid:31337,list:[{symbol:"ETH",src:"/media/tokens/eth.png",srcBlack:"/media/tokens/black/rose.png",decimals:18,address:ethers.constants.AddressZero},{symbol:"USDT",src:"/media/tokens/usdt.png",srcBlack:"/media/tokens/black/usdt.png",decimals:18,address:"0x5FbDB2315678afecb367f032d93F642f64180aa3"}]},{chaindid:42262,list:[{symbol:"ROSE",src:"/media/tokens/rose.png",srcBlack:"/media/tokens/black/rose.png",decimals:18,address:ethers.constants.AddressZero},{symbol:"weUSDT",src:"/media/tokens/usdt.png",srcBlack:"/media/tokens/black/usdt.png",decimals:6,address:"0xdC19A122e268128B5eE20366299fc7b5b199C8e3"}]},{chaindid:23294,list:[{symbol:"ROSE",src:"/media/tokens/rose.png",srcBlack:"/media/tokens/black/rose.png",decimals:18,address:ethers.constants.AddressZero},{symbol:"USDT",src:"/media/tokens/usdt.png",srcBlack:"/media/tokens/black/usdt.png",decimals:18,address:"0x6b59C68405B0216C2C8ba1EC1f8DCcBd47892c58"}]},{chaindid:503129905,list:[{symbol:"USDT",src:"/media/tokens/usdt.png",srcBlack:"/media/tokens/black/usdt.png",decimals:18,address:"0x6bC5db5C9C5CfedAf6adF8C938Ac72c9653Ff9f0"},{symbol:"USDC",src:"/media/tokens/usdc.png",srcBlack:"/media/tokens/black/usdc.png",decimals:18,address:"0x6aC2d8F07CEA9431075Ba20d5EE7A5944179b6Ea"},{symbol:"DAI",src:"/media/tokens/dai.png",srcBlack:"/media/tokens/black/dai.png",decimals:18,address:"0xED98091c7D2Fef365a4FE2BC14B2625813E056f6"},{symbol:"BUSD",src:"/media/tokens/busd.png",srcBlack:"/media/tokens/black/busd.png",decimals:18,address:"0xBFaCA5eC344276F6ccce65602fbB62af0d5E3FeF"}]},{chaindid:56,list:[{symbol:"BNB",src:"/media/tokens/bnb.png",srcBlack:"/media/tokens/black/bnb.png",decimals:18,address:ethers.constants.AddressZero},{symbol:"USDT",src:"/media/tokens/usdt.png",srcBlack:"/media/tokens/black/usdt.png",decimals:18,address:"0x55d398326f99059ff775485246999027b3197955"},{symbol:"USDC",src:"/media/tokens/usdc.png",srcBlack:"/media/tokens/black/usdc.png",decimals:18,address:"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d"},{symbol:"DAI",src:"/media/tokens/dai.png",srcBlack:"/media/tokens/black/dai.png",decimals:18,address:"0x1af3f329e8be154074d8769d1ffa4ee058b1dbc3"},{symbol:"BUSD",src:"/media/tokens/busd.png",srcBlack:"/media/tokens/black/busd.png",decimals:18,address:"0xe9e7cea3dedca5984780bafc599bd69add087d56"}]}];window.PF=t(),$(document).ready((async function(){try{let e,t,n,d=s[s.length-1];const p=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});d=s.find((e=>e.chainid==p.network)),e=p.ID,t=p.token;const u=l.find((e=>e.chaindid==d.chainid)).list.find((e=>e.symbol===t));n=p.decimals,window.oncontextmenu=function(){return!1},document.onkeydown=function(e){return 123!=event.keyCode&&(!e.ctrlKey||!e.shiftKey||e.keyCode!="I".charCodeAt(0))&&(!e.ctrlKey||!e.shiftKey||e.keyCode!="C".charCodeAt(0))&&(!e.ctrlKey||!e.shiftKey||e.keyCode!="J".charCodeAt(0))&&(!e.ctrlKey||e.keyCode!="U".charCodeAt(0))&&void 0};const c=new ethers.providers.Web3Provider(window.ethereum);await c.send("eth_requestAccounts",[]);const y=await c.getSigner(),h=await y.getAddress(),m=new ethers.Contract(d.contractAddress,a,y);document.getElementById("enemy_finishing_game_href").href=42262==d.chainid?"/":`/?network=${d.chainid}`;let f=new URLSearchParams;f.append("gameID",e),f.append("address",h),f.append("chainid",d.chainid),fetch("/sign?"+f.toString()).then((async e=>await e.json())).then((async t=>{if(0!=t.r.length)throw Error;return await m.fights(e)})).then((async a=>{const s=(await m.getFightPlayers(e))[1];if(h!=a.owner&&h!=s||0!=a.finishTime||a.owner==ethers.constants.AddressZero||s==ethers.constants.AddressZero)document.getElementById("canvas").style.display="none",window.location.href=`/?network=${d.chainid}`,document.getElementById("loadingStage").style.display="";else{let l=new URLSearchParams;l.append("address",h),l.append("gameID",e),l.append("chainid",d.chainid);const p=document.getElementsByClassName("yourKills"),c=document.getElementsByClassName("yourDeaths"),y=document.getElementsByClassName("enemyKills"),m=document.getElementsByClassName("enemyDeaths"),f=document.getElementsByClassName("internalBalance"),b=document.getElementsByClassName("enemyBalance"),g=document.getElementsByClassName("balance_coin");for(let e=0;e<g.length;e++)g.item(e).src=u.srcBlack;fetch("/balance?"+l.toString()).then((async e=>{const s=await e.json();for(let e=0;e<3;e++)try{f.item(e).textContent=`${null==s.balance||0==s.balance.length?o(a.baseAmount,n):o(s.balance,n)} ${t}`}catch(e){}const i=document.getElementById("rounds_amount"),r=a.rounds,l=Math.floor(r-parseInt(null==s.remainingRounds?r:s.remainingRounds));i.textContent=`${l}/${r}`;for(let e=0;e<3;e++)p.item(e).textContent=null==s.kills||0==s.kills.length?0:s.kills,c.item(e).textContent=null==s.deaths||0==s.deaths.length?0:s.deaths})).catch((e=>console.log(e)));let A=new URLSearchParams;A.append("address",h==a.owner?s:a.owner),A.append("gameID",e),A.append("chainid",d.chainid),fetch("/balance?"+A.toString()).then((async e=>{const s=await e.json();for(let e=0;e<3;e++)try{b.item(e).textContent=`${null==s.balance||0==s.balance.length?o(a.baseAmount,n):o(s.balance,n)} ${t}`}catch(e){}for(let e=0;e<3;e++)y.item(e).textContent=null==s.kills||0==s.kills.length?0:s.kills,m.item(e).textContent=null==s.deaths||0==s.deaths.length?0:s.deaths})).catch((e=>console.log(e)));const k=document.getElementById("canvas");k.addEventListener("click",(()=>{document.getElementsByClassName("rounds-head__subtitle")[0].scrollIntoView()})),k.addEventListener("contextmenu",(()=>{document.getElementById("confirm_finish").scrollIntoView()})),document.getElementById("full-screen").addEventListener("click",(()=>{k.style.height="100vh",k.scrollIntoView()}));const v=document.getElementById("over_modal"),x=document.getElementById("confirm_finish"),w=document.getElementsByClassName("close_modal_window")[0],C=document.getElementsByClassName("close_modal_window")[1],T=document.getElementsByClassName("close_modal_window")[2],E=document.getElementsByClassName("close_modal_window")[3],B=document.getElementsByClassName("close_modal_window")[4],M=document.getElementsByClassName("close_modal_window")[5],W=document.getElementsByClassName("close_modal_window")[6];w.onclick=function(){v.style.display="none"},C.onclick=()=>{document.getElementById("about_modal").style.display="none"},T.onclick=()=>{document.getElementById("wainting_modal").style.display="none"},E.onclick=()=>{document.getElementById("confirm_modal").style.display="none"},B.onclick=()=>{document.getElementById("pending_modal").style.display="none"},M.onclick=()=>{document.getElementById("enemy_finishing_game_modal").style.display="none"},W.onclick=()=>{document.getElementById("instruction_modal").style.display="none"},x.onclick=function(){document.getElementById("sure_want_end").style.display="",v.style.display="block";const e=i(h);document.getElementById("finish_modal_your_address").textContent=`${e} `;const l=o(a.baseAmount,n),d=r(parseFloat(f.item(0).textContent)-parseFloat(l)),p=document.getElementById("yourAmountWinLose");d>0?(p.textContent=`Win ${d} ${t}`,p.className="green"):0==d?(p.textContent=`Win ${d} ${t}`,p.className="orange"):(p.textContent=`Lose ${-1*d} ${t}`,p.className="red");let u=h==a.owner?s:a.owner;u=i(u),document.getElementById("finish_modal_enemy_address").textContent=`${u} `;const c=r(parseFloat(b.item(0).textContent)-parseFloat(l)),y=document.getElementById("enemyAmountWinLose");c>0?(y.textContent=`Win ${c} ${t}`,y.className="green"):0==c?(y.textContent=`Win ${c} ${t}`,y.className="orange"):(y.textContent=`Lose ${-1*c} ${t}`,y.className="red")},window.onclick=function(e){e.target==v?v.style.display="none":e.target==document.getElementById("wainting_modal")?document.getElementById("wainting_modal").style.display="none":e.target==document.getElementById("confirm_modal")?document.getElementById("confirm_modal").style.display="none":e.target==document.getElementById("pending_modal")?document.getElementById("pending_modal").style.display="none":e.target==document.getElementById("instruction_modal")?document.getElementById("instruction_modal").style.display="none":e.target==document.getElementById("about_modal")?document.getElementById("about_modal").style.display="none":e.target==document.getElementById("enemy_finishing_game_modal")&&(document.getElementById("enemy_finishing_game_modal").style.display="none")}}})).catch((e=>window.location.href=`/?network=${d.chainid}`))}catch(e){console.log(e),window.location.href=`/?network=${network.chainid}`}}))})()})();